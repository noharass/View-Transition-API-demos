<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  .list-box {
    display: flex;
  }
</style>
<body>

  <button onclick="changeDom()">Change DOM</button>

  <div class="list-box">
    <ul id="list-a">直接新增</ul>
    <ul id="list-b">startViewTransition</ul>
  </div>

  <script>

  const changeListA = () => {
    addItem('#list-a')
    // document.startViewTransition(() => addItem('#list-a'))
  };
  const changeListB = () => {
    // if (!document.startViewTransition) {
    //   addItem('#list-b');
    //   return;
    // }
    // 开启View Transition动效
    document.startViewTransition(() => addItem('#list-b'))
  };

  const changeDom = () => {
    changeListA();
    changeListB();
  };

  const addItem = selector => {
    const list = document.querySelector(selector);
    const item = document.createElement('li');
    item.innerText = 'xxx';
    list.appendChild(item);
  }

  </script>

</body>
</html>